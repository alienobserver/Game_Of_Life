<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <canvas id="myCanvas" width="750" height="750" style="display: inline-block;"></canvas>
    <title>Document</title>
    <style>
        .button {
            display: inline-block;
            position: relative;
            bottom: 750px;
            left: 755px;
            border: 1px solid black;
            background-color: white;
            min-width: 160px;
        }
        .button:focus{
            background-color: black;
            color: white;
        }
        #myCanvas{
            border: 1px solid black;
        }
        div{
           display: inline-block;
           position: relative;
           bottom: 744px;
           left: 755px;
           height: 18px;
           width: 18px;
           border: 1px solid black; 
        }
        h4 {
           display: inline-block;
           position: relative;
           bottom: 744px;
           left: 755px;
        }
        table{
            display: inline-block;
            position: relative;
            bottom: 350px;
            left: 0px;
            border-collapse: collapse;
        }
        td, tr{
            border: 1px solid black;
        }
    </style>
</head>
<body>
    <script src="/socket.io/socket.io.js"></script>
    <script>
        var socket = io();
        var side = 15;
        var grassCol = "green";
        var grassEaterCol = "yellow";
        var predatorCol = "red";
        var predatorEaterCol = "blue";
        var personsGenCol = "pink";
        var bombCol = "black";
        var weather = "autumn";
        var text = "";

        function get_stat(x) {
            socket.emit('send stat');
        }

        function change_weather( x ) {
            if (weather == "winter") {
                weather = "spring";
                grassCol = "#6be831";
                grassEaterCol = "yellow";
                predatorCol = "red";
                predatorEaterCol = "lightblue";
                personsGenCol = "pink";
                bombCol = "black";    
                mode2( x );
                mode4( x );
            }
            else if (weather == "spring") {
                weather = "summer";
                grassCol = "green";
                grassEaterCol = "yellow";
                predatorCol = "red";
                predatorEaterCol = "blue";
                personsGenCol = "pink";
                bombCol = "black";   
                mode4( x );        
                mode2( x );
            }
            else if (weather == "summer") {
                weather = "autumn";
                grassCol = "#b55507";
                grassEaterCol = "#e1ed3b";
                predatorCol = "red";
                predatorEaterCol = "blue";
                personsGenCol = "pink";
                bombCol = "black";  
                mode3( x );    
                mode2( x );     
            }
            else if (weather == "autumn") {
                weather = "winter";
                grassCol = "white";
                grassEaterCol = "yellow";
                predatorCol = "#bd2424";
                predatorEaterCol = "#26ded5";
                personsGenCol = "pink";
                bombCol = "black";   
                mode1( x );     
                mode4( x );    
            }
            console.log(weather);
        }

        function mode1( x ) {
            socket.emit('mode 1');
        }

        function mode2( x ) {
            socket.emit('mode 2');
        }

        function mode3( x ) {
            socket.emit('mode 3');
        }

        function mode4( x ) {
            socket.emit('mode 4');
        }

        function mode5( x ) {
            socket.emit('mode 5');
        }

        function mode6( x ) {
            socket.emit('mode 6');
        }

        socket.on('get stat', function (stat) {
            text = "";
            for (let key in stat){
                if(stat.hasOwnProperty(key)){
                    text += `${key} : ${stat[key]} <br>`;
                }
            }
            document.getElementById("statistics").innerHTML = text;
        });

        socket.on('get canvas' , function (matrix) {
            var canvas = document.getElementById("myCanvas");
            var ctx = canvas.getContext("2d");
            for (var y = 0; y < matrix.length; y++) {
                for (var x = 0; x < matrix[y].length; x++) {
                    if (matrix[y][x] == 1) {
                        ctx.fillStyle = grassCol;
                    }
                    else if (matrix[y][x] == 0) {
                        ctx.fillStyle = "#acacac";
                    }
                    else if (matrix[y][x] == 2) {
                        ctx.fillStyle = grassEaterCol;
                    }
                    else if (matrix[y][x] == 3) {
                        ctx.fillStyle = predatorCol;
                    }
                    else if (matrix[y][x] == 4) {
                        ctx.fillStyle = predatorEaterCol;
                    }
                    else if (matrix[y][x] == 5) {
                        ctx.fillStyle = personsGenCol;
                    }
                    else if (matrix[y][x] == 6) {
                        ctx.fillStyle = bombCol;
                    }
                    ctx.fillRect(x * side, y * side, side, side);
                }
            }
        });    
    </script>
    <br>
    <button onclick="mode1(this)" class="button">Remove PredatorEaters</button>
    <div style="background-image: linear-gradient(to right, lightblue, blue);"></div> <br> <br>
    <button onclick="mode2(this)" class="button">Add PredatorEaters</button>
    <div style="background-image: linear-gradient(to right, lightblue, blue);"></div> <br> <br>
    <button onclick="mode3(this)" class="button">Remove Predators</button>
    <div style="background-image: linear-gradient(to right, rgb(255, 109, 109), red);"></div> <br> <br>
    <button onclick="mode4(this)" class="button">Add Predators</button>
    <div style="background-image: linear-gradient(to right, rgb(255, 109, 109), red);"></div> <br> <br>
    <button onclick="mode5(this)" class="button">Remove Bombs</button>
    <div style="background-image: linear-gradient(to right, gray, black);"></div> <br> <br>
    <button onclick="mode6(this)" class="button">Add Bombs</button>
    <div style="background-image: linear-gradient(to right, gray, black);"></div> <br> <br>
    <button onclick="change_weather(this)" class="button">Change Weather</button>
    <div style="background-image: linear-gradient(to right, green, yellow, red, blue);"></div> <br> <br>
    <button onclick="get_stat(this)" class="button">Get Statics</button>
    <div style="background-image: linear-gradient(to right, lightblue, black);"></div> <br>
    <h4 id="statistics"></h4> <br> <br>
	<table id="legend">
		<tr>
			<td class="legend-color">Գույն</td>
			<td>Անվանում</td>
			<td>Շարժվում է</td>
			<td>Ուտում է</td>
			<td>Բազմանում է</td>
			<td>Մահանում է</td>
		</tr>
		<tr>
			<td class="legend-color" style="background-color:gray"></td>
			<td>Դատարկ վանդակներ</td>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
		</tr>
		<tr>
			<td class="legend-color" style="background-color:green"></td>
			<td>Խոտ</td>
			<td></td>
			<td></td>
			<td>Մոտակա 8 վանդակներում, 8 տակտը մեկ</td>
			<td></td>
		</tr>
		<tr>
			<td class="legend-color" style="background-color:yellow"></td>
			<td>Խոտակեր</td>
			<td>Մոտակա 8 վանդակներում, էներգիան քչանում է 1֊ով</td>
			<td>Խոտերին, մոտակա 8 վանդակներում, ուտելիս էներգիան ավելանում է 2֊ով</td>
			<td>Բազմանում է մոտակա 8 վանդակներում, երբ էներգիան 12֊ից ավել է</td>
			<td>Մահանում է, երբ էներգիան փոքր է 0֊ից</td>
		</tr>
		<tr>
			<td class="legend-color" style="background-color:red"></td>
			<td>Գիշատիչ</td>
			<td>Մոտակա 8 վանդակներում, էներգիան քչանում է 1֊ով</td>
			<td>Խոտակերներին, մոտակա 8 վանդակներում, ուտելիս էներգիան ավելանում է 2֊ով</td>
			<td>Բազմանում է մոտակա տարածքներում, երբ էներգիան 12֊ից ավել է</td>
			<td>Մահանում է, երբ էներգիան փոքր է 0֊ից</td>
		</tr>
		<tr>
			<td class="legend-color" style="background-color:blue"></td>
			<td>Գիշատչակեր</td>
			<td>Մոտակա 8 վանդակներում, էներգիան քչանում է 1֊ով</td>
			<td>Գիշատիչներին և Խոտերին, ուտելիս էներգիան ավելանում է 2֊ով</td>
			<td>Բազմանում է մոտակա տարածքներում, երբ էներգիան 25-ից ավել է</td>
			<td>Մահանում է, երբ էներգիան փոքր է 0֊ից</td>
		</tr>
		<tr>
			<td class="legend-color" style="background-color:black"></td>
			<td>Բոմբ</td>
			<td>Չի շարժվում</td>
			<td>Բոլորին բացի կերպարներին կառավարողից մոտակա 49 վանդակներում ամեն 10 տակտը մեկ</td>
			<td>Չի բազմանում</td>
			<td>Չի մահանում</td>
        </tr>
		<tr>
			<td class="legend-color" style="background-color:pink"></td>
			<td>Կերպարներին կառավարող</td>
			<td>Մոտակա 8 վանդակներում</td>
			<td>չի ուտում, միայն կառավարում է մյուս կերպարների քանակը</td>
			<td>Չի բազմանում</td>
			<td>Չի մահանում</td>
		</tr>
	</table>
</body>
</html>

